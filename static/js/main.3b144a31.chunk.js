(this["webpackJsonpreact-kabzda-1"]=this["webpackJsonpreact-kabzda-1"]||[]).push([[1],{13:function(t,e,n){t.exports={nav:"Navbar_nav__Nj7EO",item:"Navbar_item__3JUD_"}},139:function(t,e,n){},19:function(t,e,n){"use strict";n.d(e,"e",(function(){return j})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return g}));var r=n(5),a=n.n(r),c=n(8),u=n(3),i=n(7),s=n(24),o="auth/SET-AUTH-USER-DATA",l="auth/SET-FETCHING",f="auth/SET-USER-AUTHORIZATION",d="auth/SET-CAPTCHA-URL",p={data:null,isFetching:!0,isAuth:!1,captcha:null},b=function(t){return{type:o,data:t}},j=function(t){return{type:l,isFetching:t}},h=function(t){return{type:d,captcha:t}},O=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.me();case 2:0===(n=t.sent).data.resultCode&&e(b(n.data.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(t,e,n,r){return function(){var u=Object(c.a)(a.a.mark((function c(u){var o;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.login(t,e,n,r);case 2:if(0!==(o=a.sent).resultCode){a.next=9;break}return a.next=6,u(O());case 6:u(h(null)),a.next=11;break;case 9:10===o.resultCode&&u(x()),u(Object(s.a)("login",{_error:o.messages}));case 11:case"end":return a.stop()}}),c)})));return function(t){return u.apply(this,arguments)}}()},g=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.logout();case 2:0===t.sent.resultCode&&e(b(null)),e({type:f,isAuth:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.c.getCaptchaURL();case 2:n=t.sent,e(h(n.url));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case o:return Object(u.a)(Object(u.a)({},t),{},{data:e.data,isAuth:!0});case l:return Object(u.a)(Object(u.a)({},t),{},{isFetching:e.isFetching});case f:return Object(u.a)(Object(u.a)({},t),{},{isAuth:e.isAuth});case d:return Object(u.a)(Object(u.a)({},t),{},{captcha:e.captcha});default:return t}}},225:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=function(t){t&&t instanceof Function&&n.e(8).then(n.bind(null,310)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,u=e.getTTFB;n(t),r(t),a(t),c(t),u(t)}))},u=n(44),i=n.n(u),s=n(32),o=n(33),l=n(43),f=n(42),d=(n(139),n(13)),p=n.n(d),b=n(14),j=n(2);var h=function(){return Object(j.jsxs)("nav",{className:p.a.nav,children:[Object(j.jsx)("div",{className:p.a.item,children:Object(j.jsx)(b.b,{to:"/profile",children:"Profile"})}),Object(j.jsx)("div",{className:"".concat(p.a.item," ").concat(p.a.active),children:Object(j.jsx)(b.b,{to:"/dialogs",children:"Messages"})}),Object(j.jsx)("div",{className:p.a.item,children:Object(j.jsx)(b.b,{to:"/users",children:"Users"})}),Object(j.jsx)("div",{className:p.a.item,children:Object(j.jsx)(b.b,{to:"/news",children:"News"})}),Object(j.jsx)("div",{className:p.a.item,children:Object(j.jsx)("a",{children:"Music"})}),Object(j.jsx)("div",{className:p.a.item,children:Object(j.jsx)("a",{children:"Settings"})}),Object(j.jsx)("div",{className:p.a.item,children:Object(j.jsx)(b.b,{to:"/friends",activeClassName:p.a.activeLink,children:Object(j.jsx)("h2",{children:"Friends"})})})]})};var O=function(){return Object(j.jsx)("div",{})},v=n(6),g=n(52),x=n.n(g),m=n(57);var w=function(t){var e;return Object(j.jsxs)("header",{className:x.a.header,children:[Object(j.jsx)("img",{src:"https://static.tildacdn.com/tild3136-3538-4632-b463-653639356631/Dvh-1.gif",alt:""}),Object(j.jsx)("div",{className:x.a.loginBlock,children:t.isAuth?Object(j.jsxs)("div",{children:["Hi, ",null===(e=t.data)||void 0===e?void 0:e.login," | ",Object(j.jsx)(m.a,{purple:!0,onClick:t.logout,children:"Logout"})]}):Object(j.jsx)(b.b,{style:{textDecoration:"none"},to:"/login",children:"Login"})})]})},y=n(19),S=n(23),P=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(j.jsx)(w,{data:this.props.data,isAuth:this.props.isAuth,logout:this.props.logout})}}]),n}(a.a.Component),C=Object(S.b)((function(t){return{data:t.auth.data,isFetching:t.auth.isFetching,isAuth:t.auth.isAuth}}),{setFetching:y.e,logout:y.d})(P),E=n(3),k="INITIALIZED-SUCCESS",T={initialized:!1},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:return Object(E.a)(Object(E.a)({},t),{},{initialized:!0});default:return t}},I=n(28),A=n(87),_=n(81),U=n(60),F=n(75),L=n(82),D=Object(I.c)({profilePage:U.b,dialogPage:F.b,usersPage:L.a,auth:y.a,app:N,form:_.a}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.d,z=Object(I.e)(D,R(Object(I.a)(A.a)));window.store=z;var H=n(29);function B(t){return function(e){return Object(j.jsx)(a.a.Suspense,{fallback:Object(j.jsx)(H.a,{}),children:Object(j.jsx)(t,Object(E.a)({},e))})}}var G=a.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,314))})),M=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,312))})),W=a.a.lazy((function(){return n.e(6).then(n.bind(null,313))})),J=a.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,311))})),V=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(j.jsxs)("div",{style:{borderRadius:"10px"},className:"app-wrapper",children:[Object(j.jsx)(C,{}),Object(j.jsx)(h,{}),Object(j.jsx)("div",{className:"app-wrapper-content",children:Object(j.jsxs)(v.d,{children:[Object(j.jsx)(v.b,{exact:!0,path:"/",render:function(){return Object(j.jsx)(v.a,{to:"/profile"})}}),Object(j.jsx)(v.b,{path:"/dialogs",render:B(G)}),Object(j.jsx)(v.b,{path:"/profile/:userId?",render:function(){return Object(j.jsx)(r.Suspense,{fallback:Object(j.jsx)(H.a,{}),children:Object(j.jsx)(M,{})})}}),Object(j.jsx)(v.b,{path:"/news",component:function(){return Object(j.jsx)(O,{})}}),Object(j.jsx)(v.b,{path:"/users",component:B(W)}),Object(j.jsx)(v.b,{path:"/login",component:B(J)})]})})]}):Object(j.jsx)(H.a,{})}}]),n}(a.a.Component),X=Object(v.g)(Object(S.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){var e=t(Object(y.b)());Promise.all([e]).then((function(){t({type:k})}))}}})(V)),Y=function(){return Object(j.jsx)(b.a,{children:Object(j.jsx)(S.a,{store:z,children:Object(j.jsx)(X,{})})})};i.a.render(Object(j.jsx)(Y,{}),document.getElementById("root")),c()},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n(0);var r=n(2),a=function(){return Object(r.jsx)("div",{style:{width:"100px",height:"100px",position:"absolute",top:"50%",left:"50%",zIndex:1},children:Object(r.jsx)("img",{style:{width:"100px"},src:"https://i.gifer.com/XVo6.gif",alt:""})})}},52:function(t,e,n){t.exports={header:"Header_header__1DYAZ",loginBlock:"Header_loginBlock__c7CbQ"}},53:function(t,e,n){t.exports={default:"CustomButton_default__1Ox7Q",purple:"CustomButton_purple__1Odhr"}},57:function(t,e,n){"use strict";var r=n(3),a=n(56),c=(n(0),n(53)),u=n.n(c),i=n(2);e.a=function(t){var e=t.className,n=t.purple,c=Object(a.a)(t,["className","purple"]),s="".concat(n?u.a.purple:u.a.default," ").concat(e);return Object(i.jsx)("button",Object(r.a)({className:s},c))}},60:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return v})),n.d(e,"c",(function(){return g})),n.d(e,"g",(function(){return x})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return w}));var r=n(5),a=n.n(r),c=n(8),u=n(20),i=n(3),s=n(7),o=n(24),l="profile/ADD-NEW-POST",f="profile/DELETE-POST",d="profile/SET-USER-PROFILE",p="profile/SET-STATUS",b="profile/SAVE-PHOTO-SUCCESS",j={posts:[{id:1,text:"Hi, how old are you?",likesCount:10},{id:2,text:"It's my first post",likesCount:15},{id:3,text:"How is your it-kamasutra?",likesCount:20}],userProfile:null,status:""},h=function(t){return{type:l,postText:t}},O=function(t){return{type:p,status:t}},v=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.d.getProfile(Number(t));case 2:r=e.sent,n({type:d,userProfile:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.getStatus(t);case 2:r=e.sent,n(O(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.updateStatus(t);case 2:0===e.sent.resultCode&&n(O(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.savePhoto(t);case 2:0===(r=e.sent).resultCode&&n((a=r.data.photos,{type:b,photos:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null===(c=r().auth.data)||void 0===c?void 0:c.id,e.next=3,s.b.saveProfile(t);case 3:if(0!==(i=e.sent).resultCode||!u){e.next=8;break}n(v(u)),e.next=10;break;case 8:return n(Object(o.a)("edit-profile",{_error:i.messages[0]})),e.abrupt("return",Promise.reject(i.messages[0]));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(i.a)(Object(i.a)({},t),{},{posts:[].concat(Object(u.a)(t.posts),[{id:5,text:e.postText,likesCount:0}])});case f:return Object(i.a)(Object(i.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e.postId}))});case d:return Object(i.a)(Object(i.a)({},t),{},{userProfile:e.userProfile});case p:return Object(i.a)(Object(i.a)({},t),{},{status:e.status});case b:return Object(i.a)(Object(i.a)({},t),{},{userProfile:Object(i.a)(Object(i.a)({},t.userProfile),{},{photos:e.photos})});default:return t}}},7:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return s}));var r=n(84),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"2ef82a17-aba0-40b4-99bc-719ec68911f0"}}),c={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return a.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},unfollow:function(t){return a.delete("follow/".concat(t)).then((function(t){return t.data}))},follow:function(t){return a.post("follow/".concat(t)).then((function(t){return t.data}))},getProfile:function(t){return console.warn("Obsolete method. Please profileAPI object."),u.getProfile(t)}},u={getProfile:function(t){return a.get("profile/".concat(t)).then((function(t){return t.data}))},getStatus:function(t){return a.get("profile/status/".concat(t)).then((function(t){return t.data}))},updateStatus:function(t){return a.put("profile/status/",{status:t}).then((function(t){return t.data}))},savePhoto:function(t){var e=new FormData;return e.append("image",t),a.put("profile/photo",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return t.data}))},saveProfile:function(t){return a.put("profile",t).then((function(t){return t.data}))}},i={me:function(){return a.get("auth/me")},login:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a.post("auth/login",{email:t,password:e,rememberMe:n,captcha:r}).then((function(t){return t.data}))},logout:function(){return a.delete("auth/login").then((function(t){return t.data}))}},s={getCaptchaURL:function(){return a.get("security/get-captcha-url").then((function(t){return t.data}))}}},75:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(20),a=n(3),c="ADD-NEW-MESSAGE",u=function(t){return{type:c,message:t}},i={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Yura"},{id:3,name:"Sveta"},{id:4,name:"Sasha"}],messages:[{id:1,text:"Hi"},{id:2,text:"How are you?"},{id:3,text:"How is your it-kamasutra?"}]};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:return Object(a.a)(Object(a.a)({},t),{},{messages:[].concat(Object(r.a)(t.messages),[{id:6,text:e.message}])});default:return t}}},82:function(t,e,n){"use strict";n.d(e,"d",(function(){return x})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return P})),n.d(e,"e",(function(){return C}));var r=n(5),a=n.n(r),c=n(8),u=n(20),i=n(3),s=n(7),o=function(t,e,n,r){return t.map((function(t){return t[n]===e?Object(i.a)(Object(i.a)({},t),r):t}))},l="FOLLOW",f="UNFOLLOW",d="SET-USERS",p="SET-CURRENT-PAGE",b="SET-TOTAL-USERS-COUNT",j="SET-FETCHING",h="SET-FOLLOWING-IN-PROGRESS",O={users:[],pageSize:15,totalUsersCount:0,currentPage:8,isFetching:!0,followingInProgress:[]},v=function(t){return{type:l,userId:t}},g=function(t){return{type:f,userId:t}},x=function(t){return{type:p,currentPage:t}},m=function(t){return{type:j,isFetching:t}},w=function(t,e){return{type:h,isFetching:t,userId:e}},y=function(t,e){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(m(!0)),r(x(t)),n.next=4,s.d.getUsers(t,e);case 4:c=n.sent,r(m(!1)),r((u=c.items,{type:d,users:u})),r((a=c.totalCount,{type:b,totalUsersCount:a}));case 8:case"end":return n.stop()}var a,u}),n)})));return function(t){return n.apply(this,arguments)}}()},S=function(){var t=Object(c.a)(a.a.mark((function t(e,n,r,c){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w(!0,n)),t.next=3,r(n);case 3:0===t.sent.resultCode&&e(c(n)),e(w(!1,n));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),P=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n,t,s.d.follow.bind(s.d),v);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n,t,s.d.unfollow.bind(s.d),g);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(i.a)(Object(i.a)({},t),{},{users:o(t.users,e.userId,"id",{followed:!0})});case f:return Object(i.a)(Object(i.a)({},t),{},{users:o(t.users,e.userId,"id",{followed:!1})});case d:return Object(i.a)(Object(i.a)({},t),{},{users:Object(u.a)(e.users)});case p:return Object(i.a)(Object(i.a)({},t),{},{currentPage:e.currentPage});case b:return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.totalUsersCount});case j:return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});case h:return Object(i.a)(Object(i.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(u.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}}}},[[225,2,3]]]);
//# sourceMappingURL=main.3b144a31.chunk.js.map